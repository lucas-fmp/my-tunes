(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{32:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){"use strict";n.r(e);var a=n(22),c=n.n(a),r=n(11),i=n(17),s=n(4),o=n(5),l=n(7),u=n(6),d=n(1),b=n.n(d),m=n(3),j=n(2),h=n.n(j),p=n(9),f=n(0),x=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(f.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}}]),n}(b.a.Component),g=x,v="user",O=function(t){return localStorage.setItem(v,JSON.stringify(t))},k=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},N=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(v));null===e&&(e={}),k(e)(t)}))},S=function(t){return new Promise((function(e){O(Object(i.a)({},t)),k("OK")(e)}))},C=(n(32),function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={dataObj:""},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;N().then((function(e){return t.setState({dataObj:e})}))}},{key:"render",value:function(){var t=this.state.dataObj,e=t.name,n=t.image,a=""!==n?n:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png";return Object(f.jsxs)("header",{className:"d-flex justify-content-between flex-row-reverse","data-testid":"header-component",children:[Object(f.jsx)("div",{className:"p-3 d-flex align-items-center",children:""===t?Object(f.jsx)(g,{}):Object(f.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[Object(f.jsx)("p",{className:"name text-white","data-testid":"header-user-name",children:e}),Object(f.jsx)("img",{src:a,alt:"profile",className:"rounded-circle header-img"})]})}),Object(f.jsx)("nav",{className:"p-3 navbar navbar-expand-sm navbar-dark",children:Object(f.jsxs)("ul",{className:"navbar-nav gap-3",children:[Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(r.b,{class:"nav-link","data-testid":"link-to-search",to:"/search",children:"Buscar"})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(r.b,{class:"nav-link","data-testid":"link-to-favorites",to:"/favorites",children:"Favoritos"})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)(r.b,{class:"nav-link","data-testid":"link-to-profile",to:"/profile",children:"Perfil"})})]})})]})}}]),n}(b.a.Component)),w=n(15),y=n(25),I="favorite_songs";JSON.parse(localStorage.getItem(I))||localStorage.setItem(I,JSON.stringify([]));var F=function(){return JSON.parse(localStorage.getItem(I))},D=function(t){return localStorage.setItem(I,JSON.stringify(t))},L=function(t){return function(e){setTimeout((function(){e(t)}),500)}},A=function(){return new Promise((function(t){var e=F();L(e)(t)}))},P=function(t){return new Promise((function(e){if(t){var n=F();D([].concat(Object(y.a)(n),[t]))}L("OK")(e)}))},J=function(t){return new Promise((function(e){var n=F();D(n.filter((function(e){return e.trackId!==t.trackId}))),L("OK")(e)}))},H=n.p+"static/media/heart.27cf625b.svg",M=n.p+"static/media/heart-fill.e3f0a020.svg",U=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).onChange=t.onChange.bind(Object(w.a)(t)),t.verifyingFavorite=t.verifyingFavorite.bind(Object(w.a)(t)),t.state={isSaving:!1,isChecked:!1},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.verifyingFavorite()}},{key:"onChange",value:function(){var t=Object(p.a)(h.a.mark((function t(e){var n,a,c,r,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.target,a=this.props,c=a.track,r=a.updateFavorites,i=this.state.isChecked,s=n.checked,t.next=6,this.setState({isSaving:!0,isChecked:!i});case 6:if(!0!==s){t.next=13;break}return t.next=9,P(c);case 9:return t.next=11,this.setState({isSaving:!1});case 11:t.next=19;break;case 13:return t.next=15,J(c);case 15:return t.next=17,r();case 17:return t.next=19,this.setState({isSaving:!1});case 19:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"verifyingFavorite",value:function(){var t=Object(p.a)(h.a.mark((function t(){var e,n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,n=e.favoriteSongs,a=e.track,0!==n.filter((function(t){return t.trackName===a.trackName})).length){t.next=7;break}return t.next=5,this.setState({isChecked:!1});case 5:t.next=9;break;case 7:return t.next=9,this.setState({isChecked:!0});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.track,e=t.trackName,n=t.previewUrl,a=t.trackId,c=this.state,r=c.isChecked,i=c.isSaving;return Object(f.jsx)("ul",{className:"mt-3",children:Object(f.jsxs)("li",{className:"d-flex flex-column align-items-center p-2 gap-2",children:[Object(f.jsx)("p",{className:"fw-bold text-black",children:e}),Object(f.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[Object(f.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(f.jsx)("code",{children:"audio"})]}),i?Object(f.jsx)(g,{}):Object(f.jsxs)("label",{"data-testid":"checkbox-music-".concat(a),htmlFor:a,children:[Object(f.jsx)("input",{type:"checkbox",id:a,onChange:this.onChange,checked:r,className:"d-none"}),r?Object(f.jsx)("img",{alt:"filled-heart",src:M,width:25}):Object(f.jsx)("img",{alt:"heart",src:H,width:25})]})]})]})})}}]),n}(d.Component),E=function(){var t=Object(p.a)(h.a.mark((function t(e){var n,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=E,T=(n(41),function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).updateFavorites=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:n=e.sent,t.setState({favoriteSongs:n});case 4:case"end":return e.stop()}}),e)}))),t.state={tracksInfo:[],artistInfo:[],favoriteSongs:[],isGettingFavoriteSongs:!0},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=Object(p.a)(h.a.mark((function t(){var e,n,a,c,r,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match,n=e.params,a=n.id,t.next=5,K(a);case 5:return c=t.sent,r=c[0],i=c.slice(1),this.setState({artistInfo:r,tracksInfo:i}),t.next=11,A();case 11:return s=t.sent,t.next=14,this.setState({favoriteSongs:s,isGettingFavoriteSongs:!1});case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,n=e.tracksInfo,a=e.artistInfo,c=e.isGettingFavoriteSongs,r=e.favoriteSongs,i=a.artistName,s=a.collectionName;return Object(f.jsxs)("div",{"data-testid":"page-album",className:"album-container",children:[Object(f.jsx)(C,{}),Object(f.jsxs)("div",{className:"text-center p-3 m-3 w-75 rounded-3 shadow-sm teste mx-auto",children:[Object(f.jsx)("h4",{"data-testid":"artist-name",className:"h4 text-black fw-bold m-2",children:i}),Object(f.jsx)("h6",{"data-testid":"album-name",className:"h6 text-black fw-bold",children:s})]}),Object(f.jsx)("div",{className:"text-center",children:c?Object(f.jsx)(g,{}):n.map((function(e){return Object(f.jsx)(U,{track:e,favoriteSongs:r,updateFavorites:t.updateFavorites},e.trackId)}))})]})}}]),n}(b.a.Component)),B=T,G=(n(42),function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).updateFavorites=Object(p.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:n=e.sent,t.setState({favoriteSongs:n});case 4:case"end":return e.stop()}}),e)}))),t.state={isLoading:!0,favoriteSongs:[]},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=Object(p.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:return e=t.sent,t.next=5,this.setState({isLoading:!1,favoriteSongs:e});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,n=e.isLoading,a=e.favoriteSongs;return Object(f.jsxs)("div",{"data-testid":"page-favorites",className:"favorite-container",children:[Object(f.jsx)(C,{}),n?Object(f.jsx)("div",{className:"container-fluid p-3 text-center",children:Object(f.jsx)(g,{})}):a.map((function(e){return Object(f.jsx)(U,{track:e,favoriteSongs:a,teste:t.teste,updateFavorites:t.updateFavorites},e.trackId)}))]})}}]),n}(b.a.Component)),_=G,R=n(14),q=n.p+"static/media/my-tunes-logo-white.ecda6dec.png",z=(n(43),function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).onChangeInput=function(e){var n=e.target,a=t.state,c=a.login,r=a.password,i=n.name,s=n.value;t.setState(Object(R.a)({},i,s)),c.length>=3&&r.length>=7?t.setState({buttonState:!1}):t.setState({buttonState:!0})},t.createUserAux=function(){var e,n=t.state.login;t.setState({buttonClicked:!0}),(e={name:n},new Promise((function(t){O(Object(i.a)(Object(i.a)({},{name:"",email:"",image:"",description:""}),e)),k("OK")(t)}))).then((function(){return t.setState({isLogged:!0})}))},t.checkingClick=function(){if(!0===t.state.buttonClicked)return Object(f.jsx)(g,{})},t.state={buttonState:!0,login:"",password:"",isLogged:!1,buttonClicked:!1},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.buttonState,n=t.login,a=t.isLogged,c=t.password;return Object(f.jsxs)("div",{className:"login-container container-fluid p-5 text-center d-flex flex-column justify-content-center","data-testid":"page-login",children:[Object(f.jsx)("img",{src:q,alt:"My Tunes Logo",className:"login-image mx-auto d-block img-fluid mb-4"}),Object(f.jsxs)("form",{className:"login-form d-block mx-auto w-100 rounded-3",children:[Object(f.jsx)("input",{name:"login","data-testid":"login-name-input",type:"text",placeholder:"Digite seu nome",onChange:this.onChangeInput,value:n,className:"form-control mb-3 mt-4 p-2 w-75 d-block mx-auto"}),Object(f.jsx)("input",{name:"password","data-testid":"login-password-input",type:"password",placeholder:"Digite sua senha",onChange:this.onChangeInput,value:c,className:"form-control mb-3 mt-3 p-2 w-75 d-block mx-auto"}),Object(f.jsx)("div",{className:"mb-3",children:a?Object(f.jsx)(m.a,{to:"/search"}):this.checkingClick()}),Object(f.jsx)("button",{type:"button","data-testid":"login-submit-button",disabled:e,onClick:this.createUserAux,className:"btn btn-light btn-block mb-4 w-25",children:"Entrar"})]})]})}}]),n}(b.a.Component)),Q=(n(44),function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={isLoading:!0,userData:[]},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=Object(p.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:return e=t.sent,t.next=5,this.setState({isLoading:!1,userData:e});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.userData,n=t.isLoading,a=e.name,c=e.email,i=e.image,s=e.description,o=""!==i?i:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png";return Object(f.jsxs)("div",{"data-testid":"page-profile",className:"profile-container",children:[Object(f.jsx)(C,{}),n?Object(f.jsx)("div",{className:"container-fluid p-3 text-center",children:Object(f.jsx)(g,{})}):Object(f.jsxs)("div",{className:"d-flex flex-column align-items-center gap-2 p-4",children:[Object(f.jsx)("img",{className:"rounded-circle profile-img mb-3 img-fluid","data-testid":"profile-image",src:o,alt:a}),Object(f.jsx)("p",{className:"fw-bold",children:a}),""!==c&&Object(f.jsx)("p",{children:c}),""!==s&&Object(f.jsx)("p",{children:s}),Object(f.jsx)(r.b,{to:"/profile/edit",className:"text-decoration-none profile-edit btn",children:"Editar perfil"})]})]})}}]),n}(b.a.Component)),V=Q,W=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).onChangeHandler=function(e){var n=e.target,a=n.value;t.setState(Object(R.a)({},n.name,a),(function(){t.setState({buttonState:t.checkingInputs()})}))},t.onClick=Object(p.a)(h.a.mark((function e(){var n,a,c,r,i,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({isLoading:!0}),n=t.state,a=n.name,c=n.email,r=n.image,i=n.description,s={name:a,email:c,image:r,description:i},e.next=5,S(s);case 5:t.setState({redirect:!0,isLoading:!1});case 6:case"end":return e.stop()}}),e)}))),t.checkingInputs=function(){var e=t.state,n=e.name,a=e.image,c=e.description,r=e.email;return!(n&&a&&c&&r)},t.onClick=t.onClick.bind(Object(w.a)(t)),t.onChangeHandler=t.onChangeHandler.bind(Object(w.a)(t)),t.state={isLoading:!0,name:"",image:"",description:"",email:"",buttonState:!1,redirect:!1},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=Object(p.a)(h.a.mark((function t(){var e,n=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:return e=t.sent,t.next=5,this.setState({isLoading:!1,name:e.name,image:e.image,description:e.description,email:e.email,buttonState:!1,redirect:!1},(function(){n.setState({buttonState:n.checkingInputs()})}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.isLoading,n=t.name,a=t.email,c=t.description,r=t.image,i=t.buttonState;return t.redirect?Object(f.jsx)(m.a,{exact:!0,to:"/profile"}):Object(f.jsxs)("div",{"data-testid":"page-profile-edit",className:"text-center",children:[Object(f.jsx)(C,{}),e?Object(f.jsx)("div",{className:"container-fluid p-3 text-center",children:Object(f.jsx)(g,{})}):Object(f.jsxs)("form",{className:"d-flex flex-column p-2 align-items-center",children:[Object(f.jsxs)("label",{htmlFor:n,className:"d-flex flex-column gap-1 p-2 w-75",children:["Nome",Object(f.jsx)("input",{"data-testid":"edit-input-name",id:n,value:n,name:"name",onChange:this.onChangeHandler,className:"form-control d-block mx-auto"})]}),Object(f.jsxs)("label",{htmlFor:a,className:"d-flex flex-column gap-1 p-2 w-75",children:["Email",Object(f.jsx)("input",{type:"email","data-testid":"edit-input-email",id:a,value:a,name:"email",onChange:this.onChangeHandler,className:"form-control d-block mx-auto"})]}),Object(f.jsxs)("label",{htmlFor:c,className:"d-flex flex-column gap-1 p-2 w-75",children:["Descri\xe7\xe3o",Object(f.jsx)("input",{"data-testid":"edit-input-description",id:c,value:c,name:"description",onChange:this.onChangeHandler,className:"form-control d-block mx-auto"})]}),Object(f.jsxs)("label",{htmlFor:r,className:"d-flex flex-column gap-1 p-2 w-75",children:["Imagem",Object(f.jsx)("input",{"data-testid":"edit-input-image",id:r,value:r,name:"image",onChange:this.onChangeHandler,className:"form-control d-block mx-auto"})]}),Object(f.jsx)("button",{"data-testid":"edit-button-save",type:"button",disabled:i,onClick:this.onClick,className:"btn btn-light btn-block w-50 mt-3",children:"Salvar altera\xe7\xf5es"})]})]})}}]),n}(b.a.Component),X=W,Y=function(){var t=Object(p.a)(h.a.mark((function t(e){var n,a,c,r,i,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return c=t.sent,t.next=7,c.json();case 7:return r=t.sent,i=r.results,s=i.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=Y,$=(n(45),function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).onChangeInput=function(e){var n=e.target,a=n.name,c=n.value;t.setState(Object(R.a)({},a,c)),c.length>=2?t.setState({buttonState:!1}):t.setState({buttonState:!0})},t.onClick=function(){t.setState({buttonClicked:!0});var e=t.state.inputArtist;Z(e).then((function(n){t.setState({fetchComplete:!0,artist:e,inputArtist:"",data:n})}))},t.checkingClick=function(){if(!0===t.state.buttonClicked)return Object(f.jsx)("div",{className:"container-fluid p-3 text-center",children:Object(f.jsx)(g,{})})},t.checkingDataContent=function(){var e=t.state,n=e.data,a=e.artist;return 0===n.length?Object(f.jsx)("h4",{className:"pt-4 text-center h3 fw-bold",children:"Nenhum \xe1lbum foi encontrado."}):Object(f.jsxs)("div",{className:"result-container d-flex flex-column text-center",children:[Object(f.jsxs)("h3",{className:"pt-4 text-center h3 fw-bold",children:["Resultado de \xe1lbuns de:"," ",a]}),Object(f.jsx)("ul",{className:"d-flex flex-column align-items-center",children:n.map((function(t){var e=t.artworkUrl100,n=t.artistName,a=t.collectionName,c=t.collectionId;return Object(f.jsx)(r.b,{"data-testid":"link-to-album-".concat(c),to:"/album/".concat(c),className:"rounded-3 w-75 p-4 card my-3 text-decoration-none",children:Object(f.jsxs)("li",{children:[Object(f.jsx)("img",{src:e,alt:a,className:"img-thumbnail img-fluid mt-2"}),Object(f.jsx)("h4",{className:"h4 pt-2",children:a}),Object(f.jsx)("h6",{className:"h6",children:n})]})},c)}))})]})},t.state={inputArtist:"",buttonState:!0,fetchComplete:!1,buttonClicked:!1,artist:"",data:[]},t}return Object(o.a)(n,[{key:"render",value:function(){var t=this.state,e=t.inputArtist,n=t.buttonState,a=t.fetchComplete;return Object(f.jsxs)("div",{"data-testid":"page-search",className:"page-search",children:[Object(f.jsx)(C,{}),Object(f.jsxs)("form",{className:"input-artist-container container-fluid py-3 d-flex gap-1",children:[Object(f.jsx)("input",{name:"inputArtist",type:"text","data-testid":"search-artist-input",onChange:this.onChangeInput,value:e,className:"form-control",placeholder:"Digite o nome do artista, m\xfasica ou banda"}),Object(f.jsx)("button",{"data-testid":"search-artist-button",type:"button",disabled:n,onClick:this.onClick,className:"btn btn-light",children:"Buscar"})]}),Object(f.jsx)("div",{className:"search-result-container",children:a?this.checkingDataContent():this.checkingClick()})]})}}]),n}(b.a.Component)),tt=function(t){Object(l.a)(n,t);var e=Object(u.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(f.jsxs)(m.d,{children:[Object(f.jsx)(m.b,{exact:!0,path:"/",component:z}),Object(f.jsx)(m.b,{path:"/search",component:$}),Object(f.jsx)(m.b,{path:"/album/:id",render:function(t){return Object(f.jsx)(B,Object(i.a)({},t))}}),Object(f.jsx)(m.b,{path:"/favorites",component:_}),Object(f.jsx)(m.b,{exact:!0,path:"/profile",component:V}),Object(f.jsx)(m.b,{path:"/profile/edit",component:X}),Object(f.jsx)(m.b,{path:"/loading",component:g})]})}}]),n}(b.a.Component),et=tt;n(46);c.a.render(Object(f.jsx)(r.a,{children:Object(f.jsx)(et,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.43ac279f.chunk.js.map